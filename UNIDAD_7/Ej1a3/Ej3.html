<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ejercicio 3</title>
  <script type="text/javascript">
  //Crear el objeto xhr
  //para ampliar compatibilidad de navegadores
  if (window.XMLHttpRequest){
    var xhr = new XMLHttpRequest();
  }
  else if(ActiveXObject("Microsoft.XMLHTTP")){
    var xhr = ActiveXObject("Microsoft.XMLHTTP");
  }


  //Crear funcion que realiza la peticion
  function solicitDatos() {
    xhr.onreadystatechange = gestionarDatos;
    xhr.open('GET', 'ej3.txt', true);
    xhr.send();
  }
  function gestionarDatos(){
    if ( xhr.readyState == 4 && xhr.status == 200){
      resultado.innerHTML = xhr.responseText;
      CodEstado.innerHTML = xhr.status;
      Cabecera.innerHTML = xhr.getAllResponseHeaders();
    }
    //si pido cosas que no tiene
    //si el state no es 4 o status no es 200 o falla uno de los 2
    else if( xhr.readyState == 4 && xhr.status != 200){
      var str = "Se ha producido el error: " + xhr.status;
      str += "\n " + xhr.statusText;
      str += "\n Más información: ";
      str += "\n " + xhr.getAllResponseHeaders();
      alert(str);
    }
    // console.log("Esto es readyState " + xhr.readyState);
    // console.log("Esto es status " + xhr.status);
  }
  </script>
</head>
<body>
  <h1>Ejercicio Hello World</h1>
  <input type="button" value="Solicitar datos" onclick="solicitDatos();"></input>
  <p id="resultado">Este es el texto que sale al principio</p>
</body>
</html>
